(this.webpackJsonptimer=this.webpackJsonptimer||[]).push([[0],{10:function(t,e,n){t.exports=n(25)},15:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),o=n(8),i=n.n(o),r=(n(15),n(1)),c=n(2),l=n(4),u=n(3),m=n(5),k=n(9),d=(n(24),function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).onClickStartWorking=function(){n.setStateAndStorage({isWork:!0,timerRunning:!0})},n.onClickReturnToWork=function(){n.setStateAndStorage({isWork:!0,timerSeconds:60*n.settings.workMinutes})},n.onClickGoOnABreak=function(){var t=Math.round(n.state.availableBreakSeconds);n.setStateAndStorage({isWork:!1,timerSeconds:t,availableBreakSeconds:t})},n.tick=function(){if(n.state.timerRunning){var t=Date.now(),e=Math.round((t-n.state.timerLastUpdatedAt)/1e3);n.tempState=n.state;for(var a=e;a>0;a--){if(n.tempState.timerSeconds--,n.tempState.isWork){n.tempState.totalWorkedSeconds++;var s=1*n.settings.shortBreakMinutes/n.settings.workMinutes;n.tempState.availableBreakSeconds>=60*n.settings.shortBreakMinutes?n.tempState.availableBreakSeconds+=s:n.tempState.hiddenAvailableBreakSeconds+=s}else n.tempState.availableBreakSeconds--;n.tempState.timerLastUpdatedAt=t,0===n.tempState.timerSeconds&&n.onTimerFinish()}n.setStateAndStorage(n.tempState)}else n.setStateAndStorage({timerLastUpdatedAt:Date.now()})},n.onTimerFinish=function(){var t=n.tempState.isWork,e={};if(t){var a,s,o=n.tempState.cycle+1,i=n.tempState.availableBreakSeconds;o===n.settings.longBreakFreq&&(o=0,i+=60*n.settings.longBreakMinutes-60*n.settings.shortBreakMinutes),i+=n.tempState.hiddenAvailableBreakSeconds,i=Math.round(i),n.tempState.continousWork?(a=60*n.settings.workMinutes,s=!0):(a=i,s=!1),e={timerSeconds:a,availableBreakSeconds:i,hiddenAvailableBreakSeconds:0,isWork:s,cycle:o}}else e={timerSeconds:60*n.settings.workMinutes,isWork:!0};if(n.tempState=Object.assign(n.tempState,e),n.notifications&&n.notificationsGranted){var r=t?"Work finished":"Break finished";n.notifications.createNotification(r)}},n.onClickHoldWork=function(){n.setStateAndStorage({timerRunning:!1})},n.onClickResumeWork=function(){n.setStateAndStorage({timerRunning:!0})},n.onClickReset=function(){window.confirm("Are you sure you want to reset everything to inital state?")&&n.setStateAndStorage(n.getDefaultState())},n.onChangeContinousWork=function(t){n.setStateAndStorage({continousWork:t.target.checked})},n.setStateAndStorage=function(t){n.setState(t),n.storage&&(n.storage.state=Object.assign(n.state,t))},n.getDefaultState=function(){return{timerSeconds:60*n.settings.workMinutes,totalWorkedSeconds:0,isWork:null,availableBreakSeconds:0,hiddenAvailableBreakSeconds:0,cycle:0,notificationsGranted:!1,timerRunning:null,continousWork:!1,timerLastUpdatedAt:Date.now()}},n.settings=t.settings,n.storage=t.storage,n.storage&&n.storage.state?n.state=n.storage.state:n.state=n.getDefaultState(),setInterval(n.tick,1e3),n.tick(),t.notifications&&(n.notifications=t.notifications,n.notifications.requestPermission().then((function(t){"granted"===t&&(n.notificationsGranted=!0)}))),n}return Object(m.a)(e,t),Object(c.a)(e,[{key:"formatSecondsAsTimer",value:function(t){var e=Math.floor(t/60)+"";1===e.length&&(e="0"+e);var n=t%60+"";return 1===n.length&&(n="0"+n),e+":"+n}},{key:"formatSecondsAsText",value:function(t){t=Math.round(t);var e=Math.floor(t/3600)+"",n="1"===e?"hour":"hours";t%=3600;var a=Math.floor(t/60)+"",s=(t%=60)%60+"";return e+" "+n+" "+a+" "+("1"===a?"minute":"minutes")+" "+s+" "+("1"===s?"second":"seconds")}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(k.Helmet,null,s.a.createElement("title",null,this.formatSecondsAsTimer(this.state.timerSeconds))),s.a.createElement("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css",integrity:"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T",crossorigin:"anonymous"}),s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col-sm offset-sm-11"},s.a.createElement("button",{className:"btn",onClick:this.onClickReset,"data-testid":"reset-btn"},"Reset"))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col-sm"},!0===this.state.timerRunning&&s.a.createElement("button",{className:"btn btn-warning",onClick:this.onClickHoldWork},"Hold work"),!1===this.state.timerRunning&&s.a.createElement("button",{className:"btn btn-secondary",onClick:this.onClickResumeWork},"Resume work"),null===this.state.isWork&&s.a.createElement("button",{className:"btn btn-success",onClick:this.onClickStartWorking,"data-testid":"start-working-btn"},"Start working"))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col-sm"},s.a.createElement("h1",{"data-testid":"timer"},this.formatSecondsAsTimer(this.state.timerSeconds)))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col-sm"},!0===this.state.isWork&&this.state.availableBreakSeconds?s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"btn btn-success",onClick:this.onClickGoOnABreak},"Go on a break")):null,!1===this.state.isWork?s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"btn btn-secondary",onClick:this.onClickReturnToWork},"Return to work")):null)),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col-sm","data-testid":"totalWorkedTime"},this.formatSecondsAsText(this.state.totalWorkedSeconds))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col-sm","data-testid":"availableBreakTime"},this.formatSecondsAsText(this.state.availableBreakSeconds))),s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col-sm"},s.a.createElement("div",{class:"form-check"},s.a.createElement("input",{class:"form-check-input",type:"checkbox",value:"",onChange:this.onChangeContinousWork,checked:this.state.continousWork,"data-testid":"cont-work",id:"cont-work-check"}),s.a.createElement("label",{class:"form-check-label",for:"cont-work-check"},"Continuous work"))))))}}]),e}(s.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var h=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(u.a)(e).call(this,25,5,10,4,480))}return Object(m.a)(e,t),e}(function(){function t(e,n,a,s){Object(r.a)(this,t),this._workMinutes=e,this._shortBreakMinutes=n,this._longBreakMinutes=a,this._longBreakFreq=s}return Object(c.a)(t,[{key:"workMinutes",get:function(){return this._workMinutes}},{key:"shortBreakMinutes",get:function(){return this._shortBreakMinutes}},{key:"longBreakMinutes",get:function(){return this._longBreakMinutes}},{key:"longBreakFreq",get:function(){return this._longBreakFreq}}]),t}()),g=function(){function t(){Object(r.a)(this,t)}return Object(c.a)(t,[{key:"requestPermission",value:function(){return Notification.requestPermission()}},{key:"createNotification",value:function(t,e){new Notification(t,e)}}]),t}(),f=function(){function t(){Object(r.a)(this,t)}return Object(c.a)(t,[{key:"state",get:function(){return JSON.parse(localStorage.getItem("timer_state"))},set:function(t){localStorage.setItem("timer_state",JSON.stringify(t))}}]),t}();i.a.render(s.a.createElement(d,{basename:"/cooltimer",settings:new h,notifications:new g,storage:new f}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.519cc44a.chunk.js.map