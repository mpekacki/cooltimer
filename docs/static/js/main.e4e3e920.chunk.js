(this.webpackJsonptimer=this.webpackJsonptimer||[]).push([[0],{10:function(t,e,n){t.exports=n(25)},15:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(8),s=n.n(i),r=(n(15),n(1)),c=n(2),l=n(4),u=n(3),k=n(5),m=n(9),d=(n(24),function(t){function e(t){var n;if(Object(r.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).onClickStartWorking=function(){n.setStateAndStorage({isWork:!0,timerRunning:!0})},n.onClickReturnToWork=function(){n.setStateAndStorage({isWork:!0,timerSeconds:60*n.settings.workMinutes})},n.onClickGoOnABreak=function(){var t=Math.round(n.state.availableBreakSeconds);n.setStateAndStorage({isWork:!1,timerSeconds:t,availableBreakSeconds:t})},n.tick=function(){if(n.state.timerRunning){var t=Date.now(),e=Math.round((t-n.state.timerLastUpdatedAt)/1e3);n.tempState=n.state;for(var a=e;a>0;a--){var o={},i=n.tempState.timerSeconds-1;if(o.timerSeconds=i,n.tempState.isWork){var s=n.tempState.totalWorkedSeconds+1;o.totalWorkedSeconds=s;var r=1*n.settings.shortBreakMinutes/n.settings.workMinutes;n.tempState.availableBreakSeconds>=60*n.settings.shortBreakMinutes?o.availableBreakSeconds=n.tempState.availableBreakSeconds+r:o.hiddenAvailableBreakSeconds=n.tempState.hiddenAvailableBreakSeconds+r}else{var c=n.tempState.availableBreakSeconds-1;o.availableBreakSeconds=c}o.timerLastUpdatedAt=t,n.tempState=Object.assign(n.tempState,o),0===i&&n.onTimerFinish()}n.setStateAndStorage(n.tempState)}else n.setStateAndStorage({timerLastUpdatedAt:Date.now()})},n.onTimerFinish=function(){var t=n.tempState.isWork,e={};if(t){var a,o,i=n.tempState.cycle+1,s=n.tempState.availableBreakSeconds;i===n.settings.longBreakFreq&&(i=0,s+=60*n.settings.longBreakMinutes-60*n.settings.shortBreakMinutes),s+=n.tempState.hiddenAvailableBreakSeconds,s=Math.round(s),n.tempState.continousWork?(a=60*n.settings.workMinutes,o=!0):(a=s,o=!1),e={timerSeconds:a,availableBreakSeconds:s,hiddenAvailableBreakSeconds:0,isWork:o,cycle:i}}else e={timerSeconds:60*n.settings.workMinutes,isWork:!0};if(n.tempState=Object.assign(n.tempState,e),n.notifications&&n.notificationsGranted){var r=t?"Work finished":"Break finished";n.notifications.createNotification(r)}},n.onClickHoldWork=function(){n.setStateAndStorage({timerRunning:!1})},n.onClickResumeWork=function(){n.setStateAndStorage({timerRunning:!0})},n.onChangeContinousWork=function(t){n.setStateAndStorage({continousWork:t.target.checked})},n.setStateAndStorage=function(t){n.setState(t),n.storage&&(n.storage.state=Object.assign(n.state,t))},n.settings=t.settings,n.storage=t.storage,n.storage&&n.storage.state)n.state=n.storage.state;else{var a=60*t.settings.workMinutes;n.state={timerSeconds:a,totalWorkedSeconds:0,isWork:null,availableBreakSeconds:0,hiddenAvailableBreakSeconds:0,cycle:0,notificationsGranted:!1,timerRunning:null,continousWork:!1,timerLastUpdatedAt:Date.now()}}return n.tempState=n.state,setInterval(n.tick,1e3),n.tick(),t.notifications&&(n.notifications=t.notifications,n.notifications.requestPermission().then((function(t){"granted"===t&&(n.notificationsGranted=!0)}))),n}return Object(k.a)(e,t),Object(c.a)(e,[{key:"formatSecondsAsTimer",value:function(t){var e=Math.floor(t/60)+"";1===e.length&&(e="0"+e);var n=t%60+"";return 1===n.length&&(n="0"+n),e+":"+n}},{key:"formatSecondsAsText",value:function(t){t=Math.round(t);var e=Math.floor(t/3600)+"",n="1"===e?"hour":"hours";t%=3600;var a=Math.floor(t/60)+"",o=(t%=60)%60+"";return e+" "+n+" "+a+" "+("1"===a?"minute":"minutes")+" "+o+" "+("1"===o?"second":"seconds")+" "}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(m.Helmet,null,o.a.createElement("title",null,this.formatSecondsAsTimer(this.state.timerSeconds))),o.a.createElement("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css",integrity:"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T",crossorigin:"anonymous"}),!0===this.state.timerRunning&&o.a.createElement("button",{className:"btn btn-warning",onClick:this.onClickHoldWork},"Hold work"),!1===this.state.timerRunning&&o.a.createElement("button",{className:"btn btn-secondary",onClick:this.onClickResumeWork},"Resume work"),null===this.state.isWork&&o.a.createElement("button",{className:"btn btn-success",onClick:this.onClickStartWorking},"Start working"),o.a.createElement("br",null),o.a.createElement("h1",null,this.formatSecondsAsTimer(this.state.timerSeconds)),!0===this.state.isWork&&this.state.availableBreakSeconds?o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"btn btn-success",onClick:this.onClickGoOnABreak},"Go on a break"),o.a.createElement("br",null)):null,!1===this.state.isWork?o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"btn btn-secondary",onClick:this.onClickReturnToWork},"Return to work"),o.a.createElement("br",null)):null,this.formatSecondsAsText(this.state.totalWorkedSeconds),o.a.createElement("br",null),this.formatSecondsAsText(this.state.availableBreakSeconds),o.a.createElement("br",null),o.a.createElement("input",{type:"checkbox",value:"Continuous work","data-testid":"cont-work",onChange:this.onChangeContinousWork,checked:this.state.continousWork})," Continuous work")}}]),e}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var h=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(u.a)(e).call(this,25,5,10,4,480))}return Object(k.a)(e,t),e}(function(){function t(e,n,a,o,i){Object(r.a)(this,t),this._workMinutes=e,this._shortBreakMinutes=n,this._longBreakMinutes=a,this._longBreakFreq=o,this._workDayMinutes=i}return Object(c.a)(t,[{key:"workMinutes",get:function(){return this._workMinutes}},{key:"shortBreakMinutes",get:function(){return this._shortBreakMinutes}},{key:"longBreakMinutes",get:function(){return this._longBreakMinutes}},{key:"longBreakFreq",get:function(){return this._longBreakFreq}},{key:"workDayMinutes",get:function(){return this._workDayMinutes}}]),t}()),S=function(){function t(){Object(r.a)(this,t)}return Object(c.a)(t,[{key:"requestPermission",value:function(){return Notification.requestPermission()}},{key:"createNotification",value:function(t,e){new Notification(t,e)}}]),t}(),g=function(){function t(){Object(r.a)(this,t)}return Object(c.a)(t,[{key:"state",get:function(){return JSON.parse(localStorage.getItem("timer_state"))},set:function(t){localStorage.setItem("timer_state",JSON.stringify(t))}}]),t}();s.a.render(o.a.createElement(d,{basename:"/cooltimer",settings:new h,notifications:new S,storage:new g}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.e4e3e920.chunk.js.map