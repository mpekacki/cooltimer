(this.webpackJsonptimer=this.webpackJsonptimer||[]).push([[0],{70:function(t,e,s){},78:function(t,e,s){},86:function(t,e,s){"use strict";s.r(e);var a=s(1),n=s.n(a),i=s(17),r=s.n(i),o=(s(70),s(63)),c=s(13),l=s(14),d=s(22),h=s(21),u=s(58),k=(s(78),s(12)),j=s(10),m=s(9),b=s(3),p=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(){var t;Object(c.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))).onChangeWorkMinutes=function(e){t.props.onchange({workMinutes:e.target.value})},t.onChangeShortBreakMinutes=function(e){t.props.onchange({shortBreakMinutes:e.target.value})},t.onChangeLongBreakMinutes=function(e){t.props.onchange({longBreakMinutes:e.target.value})},t.onChangeLongBreakFreq=function(e){t.props.onchange({longBreakFreq:e.target.value})},t}return Object(l.a)(s,[{key:"render",value:function(){return Object(b.jsxs)(k.a,{children:[Object(b.jsxs)(j.a,{children:[Object(b.jsx)(m.a,{sm:6,children:Object(b.jsxs)(k.a.Group,{as:j.a,children:[Object(b.jsx)(k.a.Label,{column:!0,xs:8,children:"Work cycle minutes"}),Object(b.jsx)(m.a,{xs:4,children:Object(b.jsx)(k.a.Control,{type:"number",value:this.props.workMinutes,onChange:this.onChangeWorkMinutes})})]})}),Object(b.jsx)(m.a,{sm:6,children:Object(b.jsxs)(k.a.Group,{as:j.a,children:[Object(b.jsx)(k.a.Label,{column:!0,xs:8,children:"Short break minutes"}),Object(b.jsx)(m.a,{xs:4,children:Object(b.jsx)(k.a.Control,{type:"number",value:this.props.shortBreakMinutes,onChange:this.onChangeShortBreakMinutes})})]})})]}),Object(b.jsxs)(j.a,{children:[Object(b.jsx)(m.a,{sm:6,children:Object(b.jsxs)(k.a.Group,{as:j.a,children:[Object(b.jsx)(k.a.Label,{column:!0,xs:8,children:"Long break minutes"}),Object(b.jsx)(m.a,{xs:4,children:Object(b.jsx)(k.a.Control,{type:"number",value:this.props.longBreakMinutes,onChange:this.onChangeLongBreakMinutes})})]})}),Object(b.jsx)(m.a,{sm:6,children:Object(b.jsxs)(k.a.Group,{as:j.a,children:[Object(b.jsx)(k.a.Label,{column:!0,xs:8,children:"Long break after n cycles"}),Object(b.jsx)(m.a,{xs:4,children:Object(b.jsx)(k.a.Control,{type:"number",value:this.props.longBreakFreq,onChange:this.onChangeLongBreakFreq})})]})})]}),Object(b.jsx)(j.a,{children:Object(b.jsx)(m.a,{children:Object(b.jsx)(k.a.Text,{className:"text-muted",children:"Changes are effective after timer reset."})})})]})}}]),s}(n.a.Component),g=function(){function t(){Object(c.a)(this,t)}return Object(l.a)(t,null,[{key:"CREATE_TASK_PLACEHOLDER_TEXT",get:function(){return"Enter task name..."}},{key:"SAVE_NEW_TASK_BUTTON_TEXT",get:function(){return"Save new task"}},{key:"NO_TASK_TEXT",get:function(){return"No task"}},{key:"GO_ON_A_BREAT_BUTTON_TEXT",get:function(){return"Go on a break"}},{key:"RETURN_TO_WORK_BUTTON_TEXT",get:function(){return"Return to work"}},{key:"START_WORKING_BUTTON_TEXT",get:function(){return"Start timer"}},{key:"HOLD_WORK_BUTTON_TEXT",get:function(){return"Hold timer"}},{key:"RESUME_WORK_BUTTON_TEXT",get:function(){return"Resume timer"}},{key:"CONTINOUS_WORK_TEXT",get:function(){return"Continous work"}},{key:"START_TIMERS_AUTOMATICALLY_TEXT",get:function(){return"Start new timers automatically"}},{key:"RESET_CONFIRMATION_TEXT",get:function(){return"Do you want to reset timer values? (tasks, events, settings etc. will be kept)"}},{key:"RESET_BUTTON_TEXT",get:function(){return"Reset timer"}},{key:"CONFIRM_HOLD_TIMER_BUTTON_TEXT",get:function(){return"Yes, hold timer"}},{key:"CONFIRM_HOLD_TIMER_MODAL_HEADER",get:function(){return"Warning!"}},{key:"CONFIRM_HOLD_TIMER_MODAL_TEXT",get:function(){return'This option should only be used if you\'re stopping work for a significant amount of time. It should not be used for normal mid-work breaks - instead, please wait for the "Go on a break" button to become available.\n\nAre sure you want to hold the timer anyway?'}},{key:"WORK_LABEL_TEXT",get:function(){return"Work"}},{key:"BREAK_LABEL_TEXT",get:function(){return"Break"}},{key:"BREAK_WILL_BECOME_AVAILABLE_TEXT",get:function(){return"A break will be available when the current work timer finishes."}}]),t}(),O=s(16),S=s(36),T=s(62),f=s(59),x=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).onClickStartWorking=function(){a.setStateAndStorage({isWork:!0,timerRunning:!0}),a.markTimerStart(a.props.timerSeconds,Date.now())},a.onClickReturnToWork=function(){var t=a.props.timerSeconds,e=60*a.props.workMinutes;a.setStateAndStorage({isWork:!0,timerSeconds:e}),a.notifyCycleChange(!1,t,e)},a.onClickGoOnABreak=function(){var t=Math.round(a.props.availableBreakSeconds),e=a.props.timerSeconds;a.setStateAndStorage({isWork:!1,timerSeconds:t,availableBreakSeconds:t}),a.notifyCycleChange(!0,e,t)},a.tick=function(){if(a.props.timerRunning){var t=Date.now(),e=Math.round((t-a.props.timerLastUpdatedAt)/1e3),s=a.calculateNewState(e,t);a.setStateAndStorage(s)}else a.setStateAndStorage({timerLastUpdatedAt:Date.now()})},a.notifyCycleChange=function(t,e,s){var n=a.props.timerStartedAt+1e3*(a.props.timerStartedWithSeconds-e),i={wasWork:t,start:a.props.timerStartedAt,end:n};a.props.onTimerFinish(i),a.markTimerStart(s,n)},a.markTimerStart=function(t,e){var s={timerStartedAt:e,timerStartedWithSeconds:t};a.props.setStateAndStorage(s)},a.onClickHoldWork=function(){a.setStateAndStorage({timerRunning:!1}),a.notifyCycleChange(a.props.isWork,a.props.timerSeconds,a.props.timerSeconds),a.handleClose()},a.onClickResumeWork=function(){a.setStateAndStorage({timerRunning:!0}),a.markTimerStart(a.props.timerSeconds,Date.now())},a.onChangeContinousWork=function(t){a.setStateAndStorage({continousWork:t.target.checked})},a.onChangeAutoStartTimers=function(t){a.setStateAndStorage({autoStartTimers:t.target.checked})},a.setStateAndStorage=function(t){a.props.setStateAndStorage(t)},a.handleShow=function(){a.setState({showHoldModal:!0})},a.handleClose=function(){a.setState({showHoldModal:!1})},a.interval=setInterval(a.tick,1e3),a.tick(),a.state={showHoldModal:!1},a}return Object(l.a)(s,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"formatSecondsAsTimer",value:function(){return this.getTimerMinutes()+":"+this.getTimerSeconds()}},{key:"getTimerSeconds",value:function(){return String(this.props.timerSeconds%60).padStart(2,"0")}},{key:"getTimerMinutes",value:function(){return String(Math.floor(this.props.timerSeconds/60)).padStart(2,"0")}},{key:"formatSecondsAsText",value:function(t){t=Math.round(t);var e=Math.floor(t/3600)+"",s="1"===e?"hour":"hours";t%=3600;var a=Math.floor(t/60)+"",n=(t%=60)%60+"";return e+" "+s+" "+a+" "+("1"===a?"minute":"minutes")+" "+n+" "+("1"===n?"second":"seconds")}},{key:"calculateNewState",value:function(t,e){this.tempState={isWork:this.props.isWork,totalWorkedSeconds:this.props.totalWorkedSeconds,availableBreakSeconds:this.props.availableBreakSeconds,hiddenAvailableBreakSeconds:this.props.hiddenAvailableBreakSeconds,timerLastUpdatedAt:this.props.timerLastUpdatedAt,cycle:this.props.cycle,continousWork:this.props.continousWork,timerSeconds:this.props.timerSeconds,totalCombinedTime:this.props.totalCombinedTime};for(var s=t;s>0;s--){if(this.tempState.timerSeconds--,this.tempState.totalCombinedTime++,this.tempState.isWork){this.tempState.totalWorkedSeconds++;var a=1*this.props.shortBreakMinutes/this.props.workMinutes;this.tempState.availableBreakSeconds>=60*this.props.shortBreakMinutes?this.tempState.availableBreakSeconds+=a:this.tempState.hiddenAvailableBreakSeconds+=a}else this.tempState.availableBreakSeconds--;if(this.tempState.timerLastUpdatedAt=e,0===this.tempState.timerSeconds){var n=this.tempState.isWork,i={};if(n){var r=this.tempState.cycle+1,o=this.tempState.availableBreakSeconds;r===this.props.longBreakFreq&&(r=0,o+=60*this.props.longBreakMinutes-60*this.props.shortBreakMinutes),o+=this.tempState.hiddenAvailableBreakSeconds,o=Math.round(o);var c=void 0,l=void 0;this.tempState.continousWork?(c=60*this.props.workMinutes,l=!0):(c=o,l=!1),i={timerSeconds:c,availableBreakSeconds:o,hiddenAvailableBreakSeconds:0,isWork:l,cycle:r}}else i={timerSeconds:60*this.props.workMinutes,isWork:!0};i.timerRunning=this.props.autoStartTimers;var d=this.tempState.timerSeconds;this.tempState=Object.assign(this.tempState,i),this.props.showNotification(n?"Work finished":"Break finished"),this.notifyCycleChange(n,d,this.tempState.timerSeconds)}}return this.tempState}},{key:"cyclesUntilLongBreak",get:function(){return this.props.longBreakFreq-this.props.cycle}},{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(S.a,{show:this.state.showHoldModal,onHide:this.handleClose,children:[Object(b.jsx)(S.a.Header,{closeButton:!0,children:Object(b.jsx)(S.a.Title,{children:g.CONFIRM_HOLD_TIMER_MODAL_HEADER})}),Object(b.jsx)(S.a.Body,{children:g.CONFIRM_HOLD_TIMER_MODAL_TEXT}),Object(b.jsxs)(S.a.Footer,{children:[Object(b.jsx)(O.a,{variant:"secondary",onClick:this.handleClose,children:"No"}),Object(b.jsx)(O.a,{variant:"primary",onClick:this.onClickHoldWork,children:g.CONFIRM_HOLD_TIMER_BUTTON_TEXT})]})]}),Object(b.jsx)(j.a,{children:Object(b.jsxs)(m.a,{children:[!0===this.props.timerRunning&&Object(b.jsx)(O.a,{variant:"outline-warning",onClick:this.handleShow,children:g.HOLD_WORK_BUTTON_TEXT}),!1===this.props.timerRunning&&Object(b.jsx)(O.a,{variant:"secondary",onClick:this.onClickResumeWork,"data-testid":"resume-work-btn",children:g.RESUME_WORK_BUTTON_TEXT}),null===this.props.isWork&&Object(b.jsx)(O.a,{variant:"success",onClick:this.onClickStartWorking,"data-testid":"start-working-btn",children:g.START_WORKING_BUTTON_TEXT})]})}),Object(b.jsx)(j.a,{children:Object(b.jsx)(m.a,{children:Object(b.jsx)("h3",{className:"mt-2",children:!0===this.props.isWork?g.WORK_LABEL_TEXT:!1===this.props.isWork?g.BREAK_LABEL_TEXT:""})})}),Object(b.jsx)(j.a,{children:Object(b.jsx)(m.a,{children:Object(b.jsx)("h1",{"data-testid":"timer",children:this.getTimerMinutes()+":"+this.getTimerSeconds()})})}),Object(b.jsx)(j.a,{children:Object(b.jsxs)(m.a,{children:[!0===this.props.isWork?Object(b.jsx)(b.Fragment,{children:this.props.availableBreakSeconds?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(O.a,{variant:"success",onClick:this.onClickGoOnABreak,children:g.GO_ON_A_BREAT_BUTTON_TEXT})}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(T.a,{overlay:Object(b.jsx)(f.a,{id:"tooltip-disabled",children:g.BREAK_WILL_BECOME_AVAILABLE_TEXT}),children:Object(b.jsx)("span",{className:"d-inline-block",children:Object(b.jsx)(O.a,{disabled:!0,variant:"success",style:{pointerEvents:"none"},children:g.GO_ON_A_BREAT_BUTTON_TEXT})})})})}):null,!1===this.props.isWork?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(O.a,{variant:"secondary",onClick:this.onClickReturnToWork,children:g.RETURN_TO_WORK_BUTTON_TEXT})}):null]})}),Object(b.jsxs)(j.a,{children:[Object(b.jsx)(m.a,{sm:6,className:"font-weight-light text-md-right",children:"Total time worked:"}),Object(b.jsx)(m.a,{sm:6,className:"text-md-left","data-testid":"totalWorkedTime",children:this.formatSecondsAsText(this.props.totalWorkedSeconds)})]}),Object(b.jsxs)(j.a,{children:[Object(b.jsx)(m.a,{sm:6,className:"font-weight-light text-md-right",children:"Available break time:"}),Object(b.jsx)(m.a,{sm:6,className:"text-md-left","data-testid":"availableBreakTime",children:this.formatSecondsAsText(this.props.availableBreakSeconds)})]}),Object(b.jsxs)(j.a,{children:[Object(b.jsxs)(m.a,{sm:6,className:"font-weight-light text-md-right",children:["Cycles until long break (",this.props.longBreakMinutes," minutes):"]}),Object(b.jsx)(m.a,{sm:6,className:"text-md-left","data-testid":"longBreakInfo",children:this.cyclesUntilLongBreak})]}),Object(b.jsxs)(j.a,{children:[Object(b.jsx)(m.a,{sm:6,className:"font-weight-light text-md-right",children:"Total time (work + break):"}),Object(b.jsx)(m.a,{sm:6,className:"text-md-left","data-testid":"totalCombinedTime",children:this.formatSecondsAsText(this.props.totalCombinedTime)})]}),Object(b.jsx)(j.a,{children:Object(b.jsx)(m.a,{children:Object(b.jsx)(k.a.Check,{type:"checkbox",label:g.CONTINOUS_WORK_TEXT,checked:this.props.continousWork,id:"cont-work-check","data-testid":"cont-work",onChange:this.onChangeContinousWork})})}),Object(b.jsx)(j.a,{children:Object(b.jsx)(m.a,{children:Object(b.jsx)(k.a.Check,{type:"checkbox",label:g.START_TIMERS_AUTOMATICALLY_TEXT,checked:this.props.autoStartTimers,id:"auto-start-timers-check","data-testid":"auto-start-timers",onChange:this.onChangeAutoStartTimers})})})]})}}]),s}(n.a.Component),v=s(65),y=s(55),_=s(48),C=s(60),B=s(49),A=s(64),M=s(43),w=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).handleTextInputChange=function(t){var e=t.target.value;a.setState({taskInput:e,createButtonVisible:e&&""!==e.trim()&&(!a.props.tasks||!a.props.tasks.some((function(t){return t.toUpperCase()===e.toUpperCase()}))),visibleTasks:a.getVisibleTasks(e)})},a.handleSaveClick=function(){a.props.onTaskCreate(a.state.taskInput.trim()),a.setState({taskInput:"",visibleTasks:a.getVisibleTasks(""),createButtonVisible:!1})},a.handleTaskSelected=function(t){""===t&&(t=null),a.props.onTaskSelected(t)},a.state={taskInput:"",selectedTask:t.selectedTask||"",visibleTasks:t.tasks,createButtonVisible:!1},a}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(t){(this.props.selectedTask!==t.selectedTask||!!this.props.tasks!==!!t.tasks||this.props.tasks&&t.tasks&&this.props.tasks.length!==t.tasks.length)&&this.setState({selectedTask:this.props.selectedTask||"",visibleTasks:this.getVisibleTasks(this.state.taskInput)})}},{key:"getVisibleTasks",value:function(t){return this.props.tasks?this.props.tasks.filter((function(e){return e.toUpperCase().includes(t.toUpperCase())})):[]}},{key:"render",value:function(){return Object(b.jsxs)(B.a,{children:[Object(b.jsx)(j.a,{children:Object(b.jsx)(m.a,{children:Object(b.jsxs)(k.a,{inline:!0,className:"mb-2",children:[Object(b.jsx)(k.a.Group,{controlId:"taskInput",className:"mr-1",children:Object(b.jsx)(k.a.Control,{type:"text",onChange:this.handleTextInputChange,placeholder:g.CREATE_TASK_PLACEHOLDER_TEXT,value:this.state.taskInput})}),this.state.createButtonVisible?Object(b.jsxs)(O.a,{type:"primary",onClick:this.handleSaveClick,children:[g.SAVE_NEW_TASK_BUTTON_TEXT,' "',this.state.taskInput,'"']}):null]})})}),Object(b.jsx)(j.a,{children:Object(b.jsx)(m.a,{children:Object(b.jsxs)(A.a,{type:"radio",name:"tasks",style:{flexWrap:"wrap"},className:"float-left",value:this.state.selectedTask,onChange:this.handleTaskSelected,children:[Object(b.jsx)(M.a,{id:"radio-null",value:"",children:g.NO_TASK_TEXT}),this.state&&this.state.visibleTasks&&this.state.visibleTasks.map((function(t){return Object(b.jsx)(M.a,{id:"radio-"+t,value:t,"data-testid":"button-"+t,children:t},t)}))]})})})]})}}]),s}(n.a.Component),E=s(92),W=s(93),N=s(94),R=s(95),L=s(61),I="@@@TOTALS",U=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).formatSeconds=function(t){t/=1e3;var e=Math.floor(t/3600),s=Math.floor(t%3600/60);return"".concat(e,"h").concat(s,"m")},a.state={timesMap:a.calculateTimes()},a}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(t){this.props.eventsTimestamp!==t.eventsTimestamp&&this.setState({timesMap:this.calculateTimes()})}},{key:"calculateTimes",value:function(){var t=this,e={},s=0,a=0,n=0,i=0;return this.props.events.forEach((function(t){if(t.isWork){var r=Object(E.a)(t.start),o=Object(W.a)(t.start),c=Object(N.a)(t.start),l=Object(R.a)(t.start);if(r||o||c||l){var d=t.task;if(null!==d&&void 0!==d&&""!==d&&"null"!==d||(d=g.NO_TASK_TEXT),d in e||(e[d]={today:0,yesterday:0,week:0,month:0}),void 0!==t.end){var h=t.end.getTime()-t.start.getTime();r?(e[d].today+=h,s+=h):o&&(e[d].yesterday+=h,a+=h),c&&(e[d].week+=h,n+=h),l&&(e[d].month+=h,i+=h)}}}})),Object.entries(e).forEach((function(e){e[1].todayPercentage=t.getPercentage(e[1].today,s),e[1].yesterdayPercentage=t.getPercentage(e[1].yesterday,a),e[1].weekPercentage=t.getPercentage(e[1].week,n),e[1].monthPercentage=t.getPercentage(e[1].month,i)})),e[I]={today:s,yesterday:a,week:n,month:i},e}},{key:"getPercentage",value:function(t,e){var s=Math.round(t/e*100);return isNaN(s)?"-":s+"%"}},{key:"render",value:function(){var t=this;return Object(b.jsxs)(L.a,{size:"sm",responsive:!0,children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Task"}),Object(b.jsx)("th",{children:"Today"}),Object(b.jsx)("th",{children:"%"}),Object(b.jsx)("th",{children:"Yesterday"}),Object(b.jsx)("th",{children:"%"}),Object(b.jsx)("th",{children:"Week"}),Object(b.jsx)("th",{children:"%"}),Object(b.jsx)("th",{children:"Month"}),Object(b.jsx)("th",{children:"%"})]})}),Object(b.jsxs)("tbody",{children:[Object.entries(this.state.timesMap).filter((function(t){return t[0]!==I})).map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e[0]}),Object(b.jsx)("td",{"data-testid":"today-"+e[0].charAt(0)+e[0].length,children:t.formatSeconds(e[1].today)}),Object(b.jsx)("td",{"data-testid":"todayp-"+e[0].charAt(0)+e[0].length,children:e[1].todayPercentage}),Object(b.jsx)("td",{"data-testid":"yesterday-"+e[0].charAt(0)+e[0].length,children:t.formatSeconds(e[1].yesterday)}),Object(b.jsx)("td",{"data-testid":"yesterdayp-"+e[0].charAt(0)+e[0].length,children:e[1].yesterdayPercentage}),Object(b.jsx)("td",{"data-testid":"week-"+e[0].charAt(0)+e[0].length,children:t.formatSeconds(e[1].week)}),Object(b.jsx)("td",{"data-testid":"weekp-"+e[0].charAt(0)+e[0].length,children:e[1].weekPercentage}),Object(b.jsx)("td",{"data-testid":"month-"+e[0].charAt(0)+e[0].length,children:t.formatSeconds(e[1].month)}),Object(b.jsx)("td",{"data-testid":"monthp-"+e[0].charAt(0)+e[0].length,children:e[1].monthPercentage})]},e[0])})),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Total"}),Object(b.jsx)("td",{"data-testid":"today-total",children:this.formatSeconds(this.state.timesMap[I].today)}),Object(b.jsx)("td",{"data-testid":"todayp-total",children:"100%"}),Object(b.jsx)("td",{"data-testid":"yesterday-total",children:this.formatSeconds(this.state.timesMap[I].yesterday)}),Object(b.jsx)("td",{"data-testid":"yesterdayp-total",children:"100%"}),Object(b.jsx)("td",{"data-testid":"week-total",children:this.formatSeconds(this.state.timesMap[I].week)}),Object(b.jsx)("td",{"data-testid":"weekp-total",children:"100%"}),Object(b.jsx)("td",{"data-testid":"month-total",children:this.formatSeconds(this.state.timesMap[I].month)}),Object(b.jsx)("td",{"data-testid":"monthp-total",children:"100%"})]})]})]})}}]),s}(n.a.Component),D=s(37),X=s(56),F=s(47),H=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).onClickReset=function(){window.confirm(g.RESET_CONFIRMATION_TEXT)&&a.setStateAndStorage(a.getStateForReset())},a.onClickSettings=function(){a.setState({settingsVisible:!a.state.settingsVisible})},a.onClickToggleCalendar=function(){a.setState({calendarVisible:!a.state.calendarVisible})},a.setStateAndStorage=function(t){a.setState(t),a.storage&&(a.storage.state=Object.assign(a.state,t))},a.onChangeSettings=function(t){a.setStateAndStorage(t)},a.getDefaultState=function(){return{timerSeconds:60*a.defaultSettings.workMinutes,totalWorkedSeconds:0,isWork:null,availableBreakSeconds:0,hiddenAvailableBreakSeconds:0,totalCombinedTime:0,cycle:0,notificationsGranted:!1,timerRunning:null,continousWork:a.defaultSettings.continousWork,timerLastUpdatedAt:Date.now(),autoStartTimers:!0,workMinutes:a.defaultSettings.workMinutes,shortBreakMinutes:a.defaultSettings.shortBreakMinutes,longBreakMinutes:a.defaultSettings.longBreakMinutes,longBreakFreq:a.defaultSettings.longBreakFreq,settingsVisible:!1,calendarVisible:!1,events:[],timerStartedAt:null,timerStartedWithSeconds:null,tasks:[]}},a.getStateForReset=function(){var t=a.getDefaultState();return t.continousWork=a.state.continousWork,t.autoStartTimers=a.state.autoStartTimers,t.workMinutes=a.state.workMinutes,t.shortBreakMinutes=a.state.shortBreakMinutes,t.longBreakMinutes=a.state.longBreakMinutes,t.longBreakFreq=a.state.longBreakFreq,t.timerSeconds=60*a.state.workMinutes,t.events=a.state.events,t.tasks=a.state.tasks,t},a.handleTimerStateChange=function(t){a.setStateAndStorage(t)},a.handleShowNotification=function(t){a.notifications&&a.notificationsGranted&&(a.notificationQueued||(a.notificationQueued=!0,setTimeout(a.clearNotificationQueue,1e4),a.notifications.createNotification(t)))},a.clearNotificationQueue=function(){a.notificationQueued=null},a.handleEventCreated=function(t){var e=t.wasWork?"Work":"Break";a.state.selectedTask&&(e+=" ("+a.state.selectedTask+")");var s={title:e,isWork:t.wasWork,start:new Date(t.start),end:new Date(t.end),color:t.wasWork?"#3788d8":"orange",task:a.state.selectedTask};if(s.start.getTime()!==s.end.getTime()){var n=[].concat(Object(o.a)(a.state.events),[s]);n.length>1&&n[n.length-1].isWork===n[n.length-2].isWork&&n[n.length-2].end.getTime()===n[n.length-1].start.getTime()&&n[n.length-1].task===n[n.length-2].task&&((n=n.slice(0,n.length-1))[n.length-1].end=new Date(t.end)),a.setStateAndStorage({events:n}),a.setEventsTimestamp()}},a.handleTaskCreated=function(t){var e=a.state.tasks;e.push(t),a.setStateAndStorage({tasks:e}),a.setEventsTimestamp()},a.handleTaskSelected=function(t){var e=a.state.timerStartedAt+1e3*(a.state.timerStartedWithSeconds-a.state.timerSeconds);a.handleEventCreated({wasWork:a.state.isWork,start:a.state.timerStartedAt,end:e});var s=a.state.tasks;t&&(s.splice(a.state.tasks.indexOf(t),1),s.splice(0,0,t)),a.setStateAndStorage({timerStartedAt:e,timerStartedWithSeconds:a.state.timerSeconds,selectedTask:t,tasks:s})},a.defaultSettings=t.defaultSettings,a.storage=t.storage,a.state=a.getDefaultState(),a.storage&&a.storage.state&&(a.state=Object.assign(a.state,a.storage.state),a.state.events.forEach((function(t){t.start=new Date(Date.parse(t.start)),t.end=new Date(Date.parse(t.end))}))),t.notifications&&(a.notifications=t.notifications,a.notifications.requestPermission().then((function(t){"granted"===t&&(a.notificationsGranted=!0)}))),a.plugins=[y.a],a}return Object(l.a)(s,[{key:"setEventsTimestamp",value:function(){this.setState({eventsTimestamp:Date.now()})}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(u.Helmet,{defer:!1,children:Object(b.jsxs)("title",{children:[String(Math.floor(this.state.timerSeconds/60)).padStart(2,"0")+":"+String(this.state.timerSeconds%60).padStart(2,"0")," ",!0===this.state.isWork?"Work":!1===this.state.isWork?"Break":""]})}),Object(b.jsxs)(B.a,{children:[Object(b.jsx)(j.a,{children:Object(b.jsx)(m.a,{sm:{offset:11},children:Object(b.jsx)(O.a,{variant:"outline-dark",onClick:this.onClickReset,"data-testid":"reset-btn",children:g.RESET_BUTTON_TEXT})})}),Object(b.jsx)(x,{timerSeconds:this.state.timerSeconds,totalWorkedSeconds:this.state.totalWorkedSeconds,isWork:this.state.isWork,availableBreakSeconds:this.state.availableBreakSeconds,hiddenAvailableBreakSeconds:this.state.hiddenAvailableBreakSeconds,totalCombinedTime:this.state.totalCombinedTime,cycle:this.state.cycle,timerRunning:this.state.timerRunning,continousWork:this.state.continousWork,timerLastUpdatedAt:this.state.timerLastUpdatedAt,autoStartTimers:this.state.autoStartTimers,workMinutes:this.state.workMinutes,shortBreakMinutes:this.state.shortBreakMinutes,longBreakMinutes:this.state.longBreakMinutes,longBreakFreq:this.state.longBreakFreq,timerStartedAt:this.state.timerStartedAt,timerStartedWithSeconds:this.state.timerStartedWithSeconds,setStateAndStorage:this.handleTimerStateChange,showNotification:this.handleShowNotification,onTimerFinish:this.handleEventCreated}),Object(b.jsx)(j.a,{children:Object(b.jsx)(m.a,{children:Object(b.jsx)(O.a,{variant:"outline-dark",className:"m-2",onClick:this.onClickSettings,children:"Settings"})})}),Object(b.jsx)(j.a,{className:"mb-3",children:Object(b.jsx)(m.a,{children:Object(b.jsx)(X.a,{in:this.state.settingsVisible,children:Object(b.jsx)("div",{children:Object(b.jsxs)(D.a,{children:[Object(b.jsx)(D.a.Header,{children:Object(b.jsx)(F.a,{onClick:this.onClickSettings})}),Object(b.jsx)(D.a.Body,{children:Object(b.jsx)(p,{workMinutes:this.state.workMinutes,shortBreakMinutes:this.state.shortBreakMinutes,longBreakMinutes:this.state.longBreakMinutes,longBreakFreq:this.state.longBreakFreq,onchange:this.onChangeSettings})})]})})})})}),Object(b.jsx)(j.a,{className:"mb-3",children:Object(b.jsx)(m.a,{children:Object(b.jsx)(w,{onTaskCreate:this.handleTaskCreated,onTaskSelected:this.handleTaskSelected,tasks:this.state.tasks,selectedTask:this.state.selectedTask})})}),Object(b.jsx)(j.a,{className:"mb-3",children:Object(b.jsx)(m.a,{children:Object(b.jsx)(U,{events:this.state.events,eventsTimestamp:this.state.eventsTimestamp})})}),Object(b.jsx)(j.a,{className:"mb-2",children:Object(b.jsx)(m.a,{children:Object(b.jsx)(O.a,{variant:"outline-dark",onClick:this.onClickToggleCalendar,children:this.state.calendarVisible?"Hide calendar":"Show calendar"})})}),Object(b.jsx)(j.a,{children:Object(b.jsx)(m.a,{children:Object(b.jsx)(X.a,{in:this.state.calendarVisible,children:Object(b.jsx)(D.a,{children:Object(b.jsx)(D.a.Body,{children:Object(b.jsx)(v.a,{events:this.state.events,plugins:[y.a,_.b,C.a],initialView:"timeGridWeek",headerToolbar:{right:"today prev,next dayGridMonth,timeGridWeek,timeGridDay listWeek"},slotDuration:"00:10:00",height:650,eventDidMount:function(t){t.el.title=t.event.title}})})})})})})]})]})}}]),s}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(){return Object(c.a)(this,s),e.call(this,25,5,10,4,480,!0)}return s}(function(){function t(e,s,a,n,i){Object(c.a)(this,t),this._workMinutes=e,this._shortBreakMinutes=s,this._longBreakMinutes=a,this._longBreakFreq=n,this._continousWork=i}return Object(l.a)(t,[{key:"workMinutes",get:function(){return this._workMinutes}},{key:"shortBreakMinutes",get:function(){return this._shortBreakMinutes}},{key:"longBreakMinutes",get:function(){return this._longBreakMinutes}},{key:"longBreakFreq",get:function(){return this._longBreakFreq}},{key:"continousWork",get:function(){return this._continousWork}}]),t}()),V=function(){function t(){Object(c.a)(this,t)}return Object(l.a)(t,[{key:"requestPermission",value:function(){return Notification.requestPermission()}},{key:"createNotification",value:function(t,e){new Notification(t,e)}}]),t}(),G=function(){function t(){Object(c.a)(this,t)}return Object(l.a)(t,[{key:"state",get:function(){return JSON.parse(localStorage.getItem("timer_state"))},set:function(t){localStorage.setItem("timer_state",JSON.stringify(t))}}]),t}();r.a.render(Object(b.jsx)(H,{basename:"/cooltimer",defaultSettings:new K,notifications:new V,storage:new G}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[86,1,2]]]);
//# sourceMappingURL=main.3903b045.chunk.js.map